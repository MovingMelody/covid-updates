<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Corona GO!!</title>
    <link rel="stylesheet" href="css/style.css">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800|Sen:400,700,800&display=swap"
        rel="stylesheet">

    <!--line chart  script here -->
    <script>

        window.onload = function () {
            let baseurl2 = "https://corona.lmao.ninja/v2/historical/all";
            getresults();
            function getresults() {
                fetch(`${baseurl2}`)
                    .then(worldStats => {
                        return worldStats.json();
                    })
                    .then(populateArray)
                    .catch(error => {
                        console.log(error);
                    });
            };

            function populateArray(worldStats) {
                console.log(worldStats);
                let j = 0;
                var deathsArray = [];
                var deathsArrayDate = [];
                for (let k = 0; k < 50; k++) {

                    for (let i = 0; i < 1; i++) {
                        j = j + 3;
                        const today = new Date("Jan 19, 2020");
                        // console.log(today);
                        const tomorrow = new Date(today);
                        tomorrow.setDate(tomorrow.getDate() + j);
                        month = tomorrow.getMonth() + 1;
                        day = tomorrow.getDate();
                        let okay = `${month}/${day}/20`;
                        presentDeath = `${worldStats.deaths[`${month}/${day}/20`]}`;
                        presentCases = `${worldStats.deaths[`${month}/${day}/20`]}`;
                        presentRecovered = `${worldStats.cases[`${month}/${day}/20`]}`;
                        //   var length = Object.keys(`${worldStats.deaths}`).length;
                        deathsArray[k] = parseInt(presentDeath);
                        deathsArrayDate[k] = okay;
                    }
                }
                console.log(deathsArray);
                console.log(deathsArrayDate);
                var dummy = [10, 20, 60, 90, 50, 40, 10, 50, 80, 70, 90];
                // console.log(deathsArray);
                // console.log(dummy);
                // var dummy = [20,30,50,40,80,90,10,40,50];
                var dataPoints = [];


                var chart = new CanvasJS.Chart("chartContainer", {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "World Wide Deaths for every three days from Jan 22"
                    },
                    axisY: {
                        includeZero: false
                    },
                    data: [{
                        type: "line",
                        indexLabelFontSize: 16,
                        dataPoints: [
                            { label: deathsArrayDate[0], y: deathsArray[0] },
                            { label: deathsArrayDate[1], y: deathsArray[1] },
                            { label: deathsArrayDate[2], y: deathsArray[2] },
                            { label: deathsArrayDate[3], y: deathsArray[3] },
                            { label: deathsArrayDate[4], y: deathsArray[4] },
                            { label: deathsArrayDate[5], y: deathsArray[5] },
                            { label: deathsArrayDate[6], y: deathsArray[6] },
                            { label: deathsArrayDate[7], y: deathsArray[7] },
                            { label: deathsArrayDate[8], y: deathsArray[8] },
                            { label: deathsArrayDate[9], y: deathsArray[9] },
                            { label: deathsArrayDate[10],y: deathsArray[10] },
                            { label: deathsArrayDate[11],y: deathsArray[11] },
                            { label: deathsArrayDate[12], y: deathsArray[12] },
                            { label: deathsArrayDate[13], y: deathsArray[13] },
                            { label: deathsArrayDate[14], y: deathsArray[14] },
                            { label: deathsArrayDate[15], y: deathsArray[15] },
                            { label: deathsArrayDate[16], y: deathsArray[16] },
                            { label: deathsArrayDate[17], y: deathsArray[17] },
                            { label: deathsArrayDate[18], y: deathsArray[18] },
                            { label: deathsArrayDate[19], y: deathsArray[19] },
                            { label: deathsArrayDate[20], y: deathsArray[20] },
                            { label: deathsArrayDate[21], y: deathsArray[21] },
                            { label: deathsArrayDate[22], y: deathsArray[22] },
                            { label: deathsArrayDate[23], y: deathsArray[23] },
                        ]
                    }]
                });
                chart.render();
            }

        }
    </script>
</head>

<body>
    <div class="container-wrap">
        <main>
            <section class="head-title">
                <div class="title1">COVID-19 Live Stats</div>
                <div class="title2">World Wide reports</div>
                <button class="button">Update</button>
            </section>
            <section class="data-section">
                <div class="title">Cases</div>
                <div class="data cases">00000</div>

                <div class="title">Deaths</div>
                <div class="data deaths">00000</div>

                <div class="title">Recovered</div>
                <div class="data recovered">00000</div>

                <div class="title">Active</div>
                <div class="data active">00000</div>
                <p>Source : worldometers</p>
            </section>
            <a href="country.html" style="text-decoration: none;margin-top: 10px;border: 2px solid #ccc;padding: 6px;border-radius: 10px;">India updates here</a>
            
            <div id="chartContainer"
                style="height: 300px; width: 100%;margin-top: 20px;margin-left: 10px;margin-right: 10px;"></div>
                <a href="cases.html" style="text-decoration: none;margin-top: 50px; border: 2px solid #ccc; padding: 10px;border-radius: 10px;">Click here to see positive CASES Graph</a>
        </main>

    </div>
    <footer>
        <div class="footer-cls">
            <p>Designed by <a href="mailto:saisumanth2303@gmail.com" style="text-decoration: none;">Jonathan</a> &copy;
                2020.
            </p><br>
            <p><a href="https://sumanth.netlify.com" style="text-decoration: none; color: blue;"> &nbsp;&nbsp;Portfolio</a></<p>
            </p>
            <!-- <p><a href="https://sumanth.netlify.com" style="text-decoration: none; color: blue;">My Portfolio</a></<p> -->
            </p>
        </div>
    </footer>
    <script src="js/script.js"></script>
    <!-- <script src="js/graphscript.js"></script> -->
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
</body>

</html>